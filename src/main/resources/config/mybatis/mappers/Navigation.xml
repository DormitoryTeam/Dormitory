<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.noeasy.money.model.Navigation">

	<select id="queryCountry" resultType="hashmap" parameterType="java.util.Map">
		select id, name, countrycode as countryCode, status
		from country
		where status = 1
		<if test="id != null">
			and id = #{id}
		</if>
	</select>

	<select id="queryCity" resultType="hashmap" parameterType="java.util.Map">
		select id, country_id as countryId, name, status
		from city
		where status = 1
		<if test="id != null">
			and id = #{id}
		</if>
		<if test="countryId != null">
			and country_id = #{countryId}
		</if>
	</select>

	<select id="queryCollege" resultType="hashmap" parameterType="java.util.Map">
		select id, city_id as cityId, name, status, latitude, longitude, status
		from college
		where status = 1
		<if test="id != null">
			and id = #{id}
		</if>
		<if test="cityId != null">
			and city_id = #{cityId}
		</if>
	</select>

	<select id="queryCityInSameCountry" resultType="hashmap" parameterType="java.util.Map">
		select id, country_id as countryId, name, status
		from city
		where status = 1
		and country_id = (
		select country_id from city where id = #{id} and status = 1
		)
	</select>

	<select id="queryCountryByCityId" resultType="hashmap" parameterType="int">
		select country.id, country.name, countrycode as countryCode, country.status
		from country
		left join city on country.id = city.country_id and city.id
		where
		country.status = 1 and city.status = 1 and city.id = #{cityId}
	</select>

	<select id="queryFlight" resultType="hashmap" parameterType="java.util.Map">
		select id, country_id as countryId, city_id as cityId, airportCode as flightNum, name, status
		from airport
		where status = 1
		<if test="countryId != null">
			and country_id = #{countryId}
		</if>
		<if test="cityId != null">
			and city_id = #{cityId}
		</if>
		<if test="flightNum != null">
			and airportCode = #{flightNum}
		</if>
	</select>
</mapper>